608060405234801561001057600080fd5b50600436106100b45760003560e01c80638da5cb5b116100715780638da5cb5b146103425780638dc654a21461034a5780638f32d59b14610352578063a4c0ed361461035a578063af52c98114610413578063f2fde38b14610523576100b4565b8063165d35e1146100b95780633a4a660b146100dd57806340429946146100fc5780636a9705b4146101ab5780636ee4d553146101e2578063834b55e01461021b575b600080fd5b6100c1610549565b604080516001600160a01b039092168252519081900360200190f35b6100fa600480360360208110156100f357600080fd5b5035610559565b005b6100fa600480360361010081101561011357600080fd5b6001600160a01b038235811692602081013592604082013592606083013516916001600160e01b03196080820135169160a08201359160c081013591810190610100810160e0820135600160201b81111561016d57600080fd5b82018360208201111561017f57600080fd5b803590602001918460018302840111600160201b831117156101a057600080fd5b509092509050610680565b6101ce600480360360408110156101c157600080fd5b5080359060200135610a0b565b604080519115158252519081900360200190f35b6100fa600480360360808110156101f857600080fd5b508035906020810135906001600160e01b03196040820135169060600135610d4b565b6103306004803603608081101561023157600080fd5b81359190810190604081016020820135600160201b81111561025257600080fd5b82018360208201111561026457600080fd5b803590602001918460208302840111600160201b8311171561028557600080fd5b919390929091602081019035600160201b8111156102a257600080fd5b8201836020820111156102b457600080fd5b803590602001918460208302840111600160201b831117156102d557600080fd5b919390929091602081019035600160201b8111156102f257600080fd5b82018360208201111561030457600080fd5b803590602001918460208302840111600160201b8311171561032557600080fd5b509092509050610fbb565b60408051918252519081900360200190f35b6100c1611342565b6100fa611351565b6101ce6114e7565b6100fa6004803603606081101561037057600080fd5b6001600160a01b0382351691602081013591810190606081016040820135600160201b81111561039f57600080fd5b8201836020820111156103b157600080fd5b803590602001918460018302840111600160201b831117156103d257600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506114f8945050505050565b6104306004803603602081101561042957600080fd5b503561171c565b60405180878152602001868152602001858152602001806020018060200180602001848103845287818151815260200191508051906020019060200280838360005b8381101561048a578181015183820152602001610472565b50505050905001848103835286818151815260200191508051906020019060200280838360005b838110156104c95781810151838201526020016104b1565b50505050905001848103825285818151815260200191508051906020019060200280838360005b838110156105085781810151838201526020016104f0565b50505050905001995050505050505050505060405180910390f35b6100fa6004803603602081101561053957600080fd5b50356001600160a01b0316611868565b60006105536118b8565b90505b90565b6105616114e7565b6105a0576040805162461bcd60e51b81526020600482018190526024820152600080516020612876833981519152604482015290519081900360640190fd5b600081815260086020526040902060020154819015610606576040805162461bcd60e51b815260206004820152601a60248201527f43616e6e6f742064656c657465207768696c6520616374697665000000000000604482015290519081900360640190fd5b60008281526008602052604081208181556001810182905560028101829055906106336003830182612658565b610641600483016000612658565b61064f600583016000612658565b505060405182907f227c06e698a75d1029f6c20a48aca0d218abffbdf5ce0ebd117d2de93cfc6db290600090a25050565b610688610549565b6001600160a01b0316336001600160a01b0316146106e3576040805162461bcd60e51b815260206004820152601360248201527226bab9ba103ab9b2902624a725903a37b5b2b760691b604482015290519081900360640190fd5b856106ec6118b8565b6001600160a01b0316816001600160a01b03161415610752576040805162461bcd60e51b815260206004820152601760248201527f43616e6e6f742063616c6c6261636b20746f204c494e4b000000000000000000604482015290519081900360640190fd5b600088815260086020526040902054808a10156107ad576040805162461bcd60e51b8152602060048201526014602482015273125b9cdd59999a58da595b9d081c185e5b595b9d60621b604482015290519081900360640190fd5b604080516bffffffffffffffffffffffff1960608e901b1660208083019190915260348083018a905283518084039091018152605490920183528151918101919091206000818152600a90925291902054600160201b90046001600160a01b031615610857576040805162461bcd60e51b81526020600482015260146024820152734e6f6e636520616c726561647920696e2d75736560601b604482015290519081900360640190fd5b87600a600083815260200190815260200160002060000160006101000a81548163ffffffff021916908360e01c021790555088600a600083815260200190815260200160002060010160006101000a8154816001600160a01b0302191690836001600160a01b031602179055508b600a600083815260200190815260200160002060000160046101000a8154816001600160a01b0302191690836001600160a01b031602179055506109408a8287878080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152506118c792505050565b818b11156109fd57600061095a8c8463ffffffff611b9316565b905060006109666118b8565b9050806001600160a01b031663a9059cbb8f846040518363ffffffff1660e01b815260040180836001600160a01b03166001600160a01b0316815260200182815260200192505050602060405180830381600087803b1580156109c857600080fd5b505af11580156109dc573d6000803e3d6000fd5b505050506040513d60208110156109f257600080fd5b50516109fa57fe5b50505b505050505050505050505050565b60008281526005602052604081205483906001600160a01b03163314610a625760405162461bcd60e51b81526004018080602001828103825260288152602001806128966028913960400191505060405180910390fd5b60008181526005602052604080822080546001600160a01b03191690555182917f7cc135e0cebb02c3480ae5d74d377283180a2601f8f644edf7987b009316c63a91a260008481526009602090815260408083208054808552600884528285206001908101548a8752600b865284872080549088905593879055838752600a865293862060020180549182018082559087529490952090940187905590929091831415610d3c57600081815260086020526040902060020154610b2c90600163ffffffff611b9316565b600082815260086020526040902060020155610b46612676565b6000838152600a6020908152604091829020825160808101845281546001600160e01b031960e082901b1682526001600160a01b03600160201b909104811682850152600183015416818501526002820180548551818602810186019096528086529194929360608601939290830182828015610be257602002820191906000526020600020905b815481526020019060010190808311610bce575b505050919092525050506000848152600a6020526040812080546001600160c01b03191681556001810180546001600160a01b0319169055919250610c2a6002830182612658565b50506000610c3b8260600151611bf5565b6040808401518451825160248101899052604480820186905284518083039091018152606490910184526020810180516001600160e01b03166001600160e01b0319909316929092178252925183519495506000946001600160a01b039093169392909182918083835b60208310610cc45780518252601f199092019160209182019101610ca5565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d8060008114610d26576040519150601f19603f3d011682016040523d82523d6000602084013e610d2b565b606091505b50909850610d449650505050505050565b600194505050505b5092915050565b6000848152600b602090815260408083208054908490556009909252822091909155610d75612676565b6000828152600a6020908152604091829020825160808101845281546001600160e01b031960e082901b1682526001600160a01b03600160201b909104811682850152600183015416818501526002820180548551818602810186019096528086529194929360608601939290830182828015610e1157602002820191906000526020600020905b815481526020019060010190808311610dfd575b5050505050815250509050336001600160a01b031681602001516001600160a01b031614610e86576040805162461bcd60e51b815260206004820152601960248201527f4f6e6c79207265717565737465722063616e2063616e63656c00000000000000604482015290519081900360640190fd5b6000828152600a6020526040812080546001600160c01b03191681556001810180546001600160a01b031916905590610ec26002830182612658565b5050610ed086868686611caa565b6000610eda6118b8565b9050806001600160a01b031663a9059cbb8360200151886040518363ffffffff1660e01b815260040180836001600160a01b03166001600160a01b0316815260200182815260200192505050602060405180830381600087803b158015610f4057600080fd5b505af1158015610f54573d6000803e3d6000fd5b505050506040513d6020811015610f6a57600080fd5b5051610fb2576040805162461bcd60e51b81526020600482015260126024820152712ab730b13632903a37903a3930b739b332b960711b604482015290519081900360640190fd5b50505050505050565b6000610fc56114e7565b611004576040805162461bcd60e51b81526020600482018190526024820152600080516020612876833981519152604482015290519081900360640190fd5b60008811611059576040805162461bcd60e51b815260206004820152601960248201527f4d696e20726573706f6e736573206d757374206265203e203000000000000000604482015290519081900360640190fd5b858414801561106757508582145b6110a7576040805162461bcd60e51b815260206004820152600c60248201526b0aadcdacae840d8cadccee8d60a31b604482015290519081900360640190fd5b602d8611156110fd576040805162461bcd60e51b815260206004820181905260248201527f43616e6e6f742068617665206d6f7265207468616e203435206f7261636c6573604482015290519081900360640190fd5b8786101561114a576040805162461bcd60e51b8152602060048201526015602482015274496e76616c6964206d696e20726573706f6e73657360581b604482015290519081900360640190fd5b6000805b838110156111855761117b85858381811061116557fe5b9050602002013583611d8290919063ffffffff16565b915060010161114e565b5060078054604080516020808201849052428284015282518083038401815260608301808552815191830191909120600190950190955561012082018352858552608082018e9052600060a083015282518c820281810183019094528c815293965060c090910192918c918c91829185019084908082843760009201919091525050509082525060408051602089810282810182019093528982529283019290918a918a918291850190849080828437600092019190915250505090825250604080516020878102828101820190935287825292830192909188918891829185019084908082843760009201829052509390945250508481526008602090815260409182902084518155848201516001820155918401516002830155606084015180519293506112be926003850192919091019061269c565b50608082015180516112da916004840191602090910190612701565b5060a082015180516112f6916005840191602090910190612701565b505060408051838152602081018c905281518593507f1df950b8dca286fff2ebb83642851b5a9db00ff4bc87815828e845b45d183eaf929181900390910190a250979650505050505050565b6006546001600160a01b031690565b6113596114e7565b611398576040805162461bcd60e51b81526020600482018190526024820152600080516020612876833981519152604482015290519081900360640190fd5b60006113a26118b8565b604080516370a0823160e01b815230600482015290519192506001600160a01b0383169163a9059cbb91339184916370a082319160248083019260209291908290030181600087803b1580156113f757600080fd5b505af115801561140b573d6000803e3d6000fd5b505050506040513d602081101561142157600080fd5b5051604080516001600160e01b031960e086901b1681526001600160a01b03909316600484015260248301919091525160448083019260209291908290030181600087803b15801561147257600080fd5b505af1158015611486573d6000803e3d6000fd5b505050506040513d602081101561149c57600080fd5b50516114e4576040805162461bcd60e51b81526020600482015260126024820152712ab730b13632903a37903a3930b739b332b960711b604482015290519081900360640190fd5b50565b6006546001600160a01b0316331490565b611500610549565b6001600160a01b0316336001600160a01b03161461155b576040805162461bcd60e51b815260206004820152601360248201527226bab9ba103ab9b2902624a725903a37b5b2b760691b604482015290519081900360640190fd5b80518190604411156115ad576040805162461bcd60e51b8152602060048201526016602482015275092dcecc2d8d2c840e4cae2eacae6e840d8cadccee8d60531b604482015290519081900360640190fd5b602082015182906001600160e01b031981166320214ca360e11b14611619576040805162461bcd60e51b815260206004820152601e60248201527f4d757374207573652077686974656c69737465642066756e6374696f6e730000604482015290519081900360640190fd5b8560248501528460448501526000306001600160a01b0316856040518082805190602001908083835b602083106116615780518252601f199092019160209182019101611642565b6001836020036101000a038019825116818451168082178552505050505050905001915050600060405180830381855af49150503d80600081146116c1576040519150601f19603f3d011682016040523d82523d6000602084013e6116c6565b606091505b5050905080610fb2576040805162461bcd60e51b815260206004820152601860248201527f556e61626c6520746f2063726561746520726571756573740000000000000000604482015290519081900360640190fd5b60008181526008602090815260408083208054600182015460028301546003840180548651818902810189019097528087528897889760609788978897909690959094909360048301936005909301929185918301828280156117a857602002820191906000526020600020905b81546001600160a01b0316815260019091019060200180831161178a575b50505050509250818054806020026020016040519081016040528092919081815260200182805480156117fa57602002820191906000526020600020905b8154815260200190600101908083116117e6575b505050505091508080548060200260200160405190810160405280929190818152602001828054801561184c57602002820191906000526020600020905b815481526020019060010190808311611838575b5050505050905095509550955095509550955091939550919395565b6118706114e7565b6118af576040805162461bcd60e51b81526020600482018190526024820152600080516020612876833981519152604482015290519081900360640190fd5b6114e481611de3565b6002546001600160a01b031690565b6118cf612748565b600084815260086020908152604091829020825160c08101845281548152600182015481840152600282015481850152600382018054855181860281018601909652808652919492936060860193929083018282801561195857602002820191906000526020600020905b81546001600160a01b0316815260019091019060200180831161193a575b50505050508152602001600482018054806020026020016040519081016040528092919081815260200182805480156119b057602002820191906000526020600020905b81548152602001906001019080831161199c575b5050505050815260200160058201805480602002602001604051908101604052809291908181526020018280548015611a0857602002820191906000526020600020905b8154815260200190600101908083116119f4575b50505050508152505090506000816020015111611a6c576040805162461bcd60e51b815260206004820152601960248201527f496e76616c696420736572766963652061677265656d656e7400000000000000604482015290519081900360640190fd5b611a7461277e565b600085815260086020526040812060020154611a9790600163ffffffff611d8216565b60008781526008602090815260409182902060020192909255845181518981529283015280517f68b7731e476ef738b7035255b0d3b082260caa0e54a05201d6b727e86254b41c9281900390910190a160005b836060015151811015610fb257611b2084608001518281518110611b0a57fe5b602002602001015130636a9705b460e01b611e84565b9250611b32838663ffffffff611eaf16565b611b6b84606001518281518110611b4557fe5b6020026020010151848660a001518481518110611b5e57fe5b6020026020010151611ed2565b6000818152600b602090815260408083208a9055600990915290208890559150600101611aea565b600082821115611bea576040805162461bcd60e51b815260206004820152601e60248201527f536166654d6174683a207375627472616374696f6e206f766572666c6f770000604482015290519081900360640190fd5b508082035b92915050565b805160009081611c0c82600263ffffffff6120a916565b905060028206611c8b576000611c2a611c2486612113565b83612183565b90506000611c4886611c4385600163ffffffff611d8216565b612183565b90506000600280840781840701059050611c7f81611c7360028505600287059063ffffffff61235616565b9063ffffffff61235616565b95505050505050611ca5565b611ca084611c4383600163ffffffff611d8216565b925050505b919050565b60008481526005602052604080822080546001600160a01b0319811690915590516001600160a01b039091169186917fe1fe3afa0f7f761ff0a8b89086790efd5140d2907ebd5b7ff6bfcb5e075fd4c59190a260408051636ee4d55360e01b815260048101879052602481018690526001600160e01b0319851660448201526064810184905290516001600160a01b03831691636ee4d55391608480830192600092919082900301818387803b158015611d6357600080fd5b505af1158015611d77573d6000803e3d6000fd5b505050505050505050565b600082820183811015611ddc576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b9392505050565b6001600160a01b038116611e285760405162461bcd60e51b815260040180806020018281038252602681526020018061280c6026913960400191505060405180910390fd5b6006546040516001600160a01b038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3600680546001600160a01b0319166001600160a01b0392909216919091179055565b611e8c61277e565b611e9461277e565b611ea68186868663ffffffff6123bb16565b95945050505050565b611ebe826080015182516123f8565b50611ecd826080015182612432565b505050565b6004546040805130606090811b60208084019190915260348084018690528451808503909101815260549093018452825192810192909220908601939093526000838152600590915281812080546001600160a01b0319166001600160a01b038816179055905182917fb5e6e01e79f91267dc17b4e6314d5d4d03593d2ceee0fbb452b750bd70ea5af991a26002546001600160a01b0316634000aea08584611f7a8761244c565b6040518463ffffffff1660e01b815260040180846001600160a01b03166001600160a01b0316815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015611fe4578181015183820152602001611fcc565b50505050905090810190601f1680156120115780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b15801561203257600080fd5b505af1158015612046573d6000803e3d6000fd5b505050506040513d602081101561205c57600080fd5b50516120995760405162461bcd60e51b81526004018080602001828103825260238152602001806128326023913960400191505060405180910390fd5b6004805460010190559392505050565b60008082116120ff576040805162461bcd60e51b815260206004820152601a60248201527f536166654d6174683a206469766973696f6e206279207a65726f000000000000604482015290519081900360640190fd5b600082848161210a57fe5b04949350505050565b6060808251604051908082528060200260200182016040528015612141578160200160208202803883390190505b50905060005b8351811015610d445783818151811061215c57fe5b602002602001015182828151811061217057fe5b6020908102919091010152600101612147565b815160408051828152602080840282010190915260009184918491906060908280156121b9578160200160208202803883390190505b5090506060826040519080825280602002602001820160405280156121e8578160200160208202803883390190505b5090506000806000805b8861220488600263ffffffff6120a916565b8151811061220e57fe5b602002602001015191506000935060009250600090505b868110156122d3578189828151811061223a57fe5b6020026020010151121561227e5788818151811061225457fe5b602002602001015186858151811061226857fe5b60209081029190910101526001909301926122cb565b8189828151811061228b57fe5b602002602001015113156122cb578881815181106122a557fe5b60200260200101518584815181106122b957fe5b60209081029190910101526001909201915b600101612225565b8388116122f1578396506122e78987612575565b9099509550612351565b612301878463ffffffff611b9316565b8811156123415761232861231b888563ffffffff611b9316565b899063ffffffff611b9316565b97508296506123378986612575565b9099509450612351565b509750611bef9650505050505050565b6121f2565b600082820181831280159061236b5750838112155b80612380575060008312801561238057508381125b611ddc5760405162461bcd60e51b81526004018080602001828103825260218152602001806128556021913960400191505060405180910390fd5b6123c361277e565b6123d385608001516101006123f8565b50509183526001600160a01b031660208301526001600160e01b031916604082015290565b6124006127b3565b60208206156124155760208206602003820191505b506020828101829052604080518085526000815290920101905290565b61243a6127b3565b611ddc83846000015151848551612578565b8051602080830151604080850151606086810151608088015151935160006024820181815260448301829052606483018a90526001600160a01b03881660848401526001600160e01b0319861660a484015260c48301849052600160e48401819052610100610104850190815288516101248601528851969b6320214ca360e11b9b949a8b9a91999098909796939591949361014401918501908083838e5b838110156125035781810151838201526020016124eb565b50505050905090810190601f1680156125305780820380516001836020036101000a031916815260200191505b5060408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909d169c909c17909b5250989950505050505050505050919050565b91565b6125806127b3565b825182111561258e57600080fd5b846020015182850111156125b8576125b8856125b08760200151878601612624565b60020261263b565b6000808651805187602083010193508088870111156125d75787860182525b505050602084015b602084106125fe5780518252601f1990930192602091820191016125df565b51815160001960208690036101000a019081169019919091161790525083949350505050565b600081831115612635575081611bef565b50919050565b815161264783836123f8565b506126528382612432565b50505050565b50805460008255906000526020600020908101906114e491906127cd565b604080516080810182526000808252602082018190529181019190915260608082015290565b8280548282559060005260206000209081019282156126f1579160200282015b828111156126f157825182546001600160a01b0319166001600160a01b039091161782556020909201916001909101906126bc565b506126fd9291506127e7565b5090565b82805482825590600052602060002090810192821561273c579160200282015b8281111561273c578251825591602001919060010190612721565b506126fd9291506127cd565b6040518060c001604052806000815260200160008152602001600081526020016060815260200160608152602001606081525090565b6040805160a0810182526000808252602082018190529181018290526060810191909152608081016127ae6127b3565b905290565b604051806040016040528060608152602001600081525090565b61055691905b808211156126fd57600081556001016127d3565b61055691905b808211156126fd5780546001600160a01b03191681556001016127ed56fe4f776e61626c653a206e6577206f776e657220697320746865207a65726f2061646472657373756e61626c6520746f207472616e73666572416e6443616c6c20746f206f7261636c655369676e6564536166654d6174683a206164646974696f6e206f766572666c6f774f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572536f75726365206d75737420626520746865206f7261636c65206f66207468652072657175657374a265627a7a72315820a5fdbbab27e75f4ecd5756c777cbf3810b15c802321d660499509acefaf8065f64736f6c634300050d0032