60806040526004361061027d5760003560e01c806399ba59361161014f578063c6c3cfcc116100c1578063e997dd5c1161007a578063e997dd5c14610ce3578063f5049d6514610d3f578063f52564ec14610d78578063f59c370814610db3578063fab1044b14610dee578063fcc2c07814610e3f5761027d565b8063c6c3cfcc14610a95578063cce7ec1314610aaa578063d28a7de31461082f578063d5bb7f6714610ad6578063ddca3f4314610b00578063e5b6416714610b155761027d565b8063a5bb274911610113578063a5bb2749146109a2578063abe7f1ab146109f0578063ae5b102e14610a29578063ae682e2e14610407578063b014e26914610a62578063b70cabb4146105e65761027d565b806399ba59361461082f5780639ab700d9146108445780639ae11062146108aa5780639b3e2787146108e05780639d524091146109195761027d565b80635f68e477116101f35780637e74ac3c116101ac5780637e74ac3c146106915780637ecebe00146106a657806389cc145a146106d95780638c42f45f14610710578063917b42a7146107675780639384ec801461081a5761027d565b80635f68e4771461059257806364026ac0146105d1578063695f886e146105e65780636c54df52146105fb578063725f36261461063457806374d5e1001461065e5761027d565b8063292166a211610245578063292166a21461042e5780632b5214161461045957806338af3eed1461046e5780634054832f1461049f5780635887ec0f146104ee5780635c80a435146105215761027d565b8063093bef8a14610282578063150b7a02146102cf5780631c977c22146103875780631ca4f8ee146103d95780632420ac7d14610407575b600080fd5b34801561028e57600080fd5b506102bb600480360360408110156102a557600080fd5b506001600160a01b038135169060200135610e69565b604080519115158252519081900360200190f35b3480156102db57600080fd5b5061036a600480360360808110156102f257600080fd5b6001600160a01b03823581169260208101359091169160408201359190810190608081016060820135600160201b81111561032c57600080fd5b82018360208201111561033e57600080fd5b803590602001918460018302840111600160201b8311171561035f57600080fd5b509092509050610e95565b604080516001600160e01b03199092168252519081900360200190f35b34801561039357600080fd5b506103c0600480360360408110156103aa57600080fd5b506001600160a01b038135169060200135610ee7565b6040805192835260208301919091528051918290030190f35b3480156103e557600080fd5b506103ee610f5b565b6040805163ffffffff9092168252519081900360200190f35b34801561041357600080fd5b5061041c610f60565b60408051918252519081900360200190f35b34801561043a57600080fd5b50610443610f68565b6040805160ff9092168252519081900360200190f35b34801561046557600080fd5b5061041c610f6d565b34801561047a57600080fd5b50610483610f9a565b604080516001600160a01b039092168252519081900360200190f35b3480156104ab57600080fd5b506104d2600480360360208110156104c257600080fd5b50356001600160601b0316610fae565b604080516001600160601b039092168252519081900360200190f35b3480156104fa57600080fd5b506104d26004803603602081101561051157600080fd5b50356001600160601b0316611020565b34801561052d57600080fd5b5061055a6004803603604081101561054457600080fd5b506001600160a01b038135169060200135611038565b6040805163ffffffff95861681529390941660208401526001600160601b039182168385015216606082015290519081900360800190f35b34801561059e57600080fd5b5061041c600480360360608110156105b557600080fd5b506001600160a01b038135169060208101359060400135611083565b3480156105dd57600080fd5b506104836110ef565b3480156105f257600080fd5b506103ee6110fe565b34801561060757600080fd5b506104d26004803603604081101561061e57600080fd5b506001600160a01b038135169060200135611103565b34801561064057600080fd5b506102bb6004803603602081101561065757600080fd5b50356111b8565b34801561066a57600080fd5b5061041c6004803603602081101561068157600080fd5b50356001600160a01b03166111cb565b34801561069d57600080fd5b506104436111dd565b3480156106b257600080fd5b5061041c600480360360208110156106c957600080fd5b50356001600160a01b03166111e2565b3480156106e557600080fd5b5061070e600480360360408110156106fc57600080fd5b5060ff813581169160200135166111f4565b005b34801561071c57600080fd5b506104d2600480360360a081101561073357600080fd5b5063ffffffff81358116916020810135821691604082013516906001600160601b036060820135811691608001351661129b565b34801561077357600080fd5b5061041c6004803603606081101561078a57600080fd5b810190602081018135600160201b8111156107a457600080fd5b8201836020820111156107b657600080fd5b803590602001918460208302840111600160201b831117156107d757600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550508235935050506020013561131b565b34801561082657600080fd5b5061041c6113ce565b34801561083b57600080fd5b506103ee6111dd565b34801561085057600080fd5b5061070e600480360360c081101561086757600080fd5b506001600160a01b038135169060208101359063ffffffff60408201358116916060810135909116906001600160601b03608082013581169160a00135166113f2565b61070e600480360360608110156108c057600080fd5b506001600160a01b03813581169160208101359160409091013516611517565b3480156108ec57600080fd5b506104836004803603604081101561090357600080fd5b506001600160a01b0381351690602001356118d1565b34801561092557600080fd5b506109526004803603604081101561093c57600080fd5b506001600160a01b0381351690602001356118f7565b6040805163ffffffff97881681529590961660208601526001600160601b0393841685870152918316606085015290911660808301526001600160a01b031660a082015290519081900360c00190f35b3480156109ae57600080fd5b5061070e600480360360808110156109c557600080fd5b5060ff81358116916020810135909116906001600160a01b03604082013581169160600135166119ef565b3480156109fc57600080fd5b5061070e60048036036040811015610a1357600080fd5b506001600160a01b038135169060200135611ac0565b348015610a3557600080fd5b5061070e60048036036040811015610a4c57600080fd5b506001600160a01b038135169060200135611c1f565b348015610a6e57600080fd5b506102bb60048036036020811015610a8557600080fd5b50356001600160a01b0316611c62565b348015610aa157600080fd5b506104d2611c77565b61070e60048036036040811015610ac057600080fd5b506001600160a01b038135169060200135611c7f565b348015610ae257600080fd5b5061070e60048036036020811015610af957600080fd5b5035611c8a565b348015610b0c57600080fd5b50610443611c98565b348015610b2157600080fd5b5061070e600480360360c0811015610b3857600080fd5b6001600160a01b038235169160208101359160408201359190810190608081016060820135600160201b811115610b6e57600080fd5b820183602082011115610b8057600080fd5b803590602001918460208302840111600160201b83111715610ba157600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b811115610bf057600080fd5b820183602082011115610c0257600080fd5b803590602001918460208302840111600160201b83111715610c2357600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b811115610c7257600080fd5b820183602082011115610c8457600080fd5b803590602001918460208302840111600160201b83111715610ca557600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550611ca1945050505050565b348015610cef57600080fd5b5061070e600480360360a0811015610d0657600080fd5b506001600160a01b038135169060208101359063ffffffff604082013516906001600160601b0360608201358116916080013516611efa565b348015610d4b57600080fd5b506102bb60048036036040811015610d6257600080fd5b506001600160a01b038135169060200135611f0c565b348015610d8457600080fd5b5061070e60048036036040811015610d9b57600080fd5b506001600160a01b0381358116916020013516611f36565b348015610dbf57600080fd5b5061070e60048036036040811015610dd657600080fd5b506001600160a01b0381351690602001351515612009565b348015610dfa57600080fd5b506104d260048036036080811015610e1157600080fd5b5063ffffffff81358116916020810135909116906001600160601b0360408201358116916060013516612166565b348015610e4b57600080fd5b506102bb60048036036020811015610e6257600080fd5b5035612175565b6001600160a01b038216600090815260208190526040812054610e8c9083612181565b90505b92915050565b600060208214610ea457600080fd5b6024606435013560e081901c60c082901c606083901c83610ecb8b8b338c88888888612188565b50600160e11b630a85bd01029450505050505b95945050505050565b600080600080600080600080610efd8a8a6118f7565b63ffffffff95861660e01b9590941660c01b6001600160e01b0316949094176001600160601b0392831660601b6001600160c01b031617908216179a5090911660a01b6001600160a01b039091161796505050505050509250929050565b600481565b600160ff1b81565b601481565b60008080526020527fad3228b676f7d3cd4284a5443f17f1962b36e491b30a40b2405849e597ba5fb55490565b60025461010090046001600160a01b031681565b60025460009061010090046001600160a01b031615801590610fda57506003546001600160a01b031615155b8015610ff25750600254610ff09060ff1661242d565b155b15611017576002546110109060ff166001600160601b038416612442565b905061101b565b5060005b919050565b633b9aca006001600160601b03919091168190040290565b600560209081526000928352604080842090915290825290205463ffffffff80821691600160201b8104909116906001600160601b03600160401b8204811691600160a01b90041684565b600042821161109157600080fd5b506001600160a01b039290921660008181526001602090815260409182902054825160609490941b84830152603484019490945260548301949094526074808301939093528051808303909301835260949091019052805191012090565b6003546001600160a01b031681565b600181565b600061110d6127b7565b506001600160a01b03808416600081815260056020908152604080832087845282528083208151608081018352905463ffffffff8082168352600160201b820416828501526001600160601b03600160401b8204811683850152600160a01b9091041660608201529383526004825280832087845290915290205490911661119457600080fd5b6111b08160000151826020015183604001518460600151612166565b949350505050565b6000610e8f6111c5610f6d565b83612181565b60006020819052908152604090205481565b600281565b60016020526000908152604090205481565b6111fe6002612175565b61120757600080fd5b601460ff82160460ff168260ff16111561122057600080fd5b61122a82826124ce565b6002805460ff191660ff928316179081905560035460408051868516815293851660208501526101009092046001600160a01b0390811684840152166060830152517fd3839ff7b817a5302bae0a688a8452cf4ebf97c9d53fea7b3b687818822a0116916080908290030190a15050565b60008563ffffffff168463ffffffff1610156112b8575081610ede565b8463ffffffff168463ffffffff1611156112d3575080610ede565b63ffffffff808716908681169086166001600160601b0380871690861661130c858503868503838503028161130457fe5b048303611020565b9b9a5050505050505050505050565b600083516000141561132c57600080fd5b60008060008660008151811061133e57fe5b60200260200101516001600160a01b03166001600160a01b031681526020019081526020016000205490506000600190505b85518110156113c25760008087838151811061138857fe5b60200260200101516001600160a01b03166001600160a01b0316815260200190815260200160002054821691508080600101915050611370565b50610ede81858561251c565b7f2cf17df76ceaa5ed9a7532df201280a827129460499fe9d4600ec742501d40de81565b6000866001600160a01b0316636352211e876040518263ffffffff1660e01b81526004018082815260200191505060206040518083038186803b15801561143857600080fd5b505afa15801561144c573d6000803e3d6000fd5b505050506040513d602081101561146257600080fd5b50519050336001600160a01b038216148061148257506114826001612175565b61148b57600080fd5b60408051600160e01b6323b872dd0281526001600160a01b038381166004830152306024830152604482018990529151918916916323b872dd9160648082019260009290919082900301818387803b1580156114e657600080fd5b505af11580156114fa573d6000803e3d6000fd5b5050505061150e3382898989898989612188565b50505050505050565b61152160026111b8565b61152a57600080fd5b6001600160a01b038084166000908152600460209081526040808320868452909152902054168061155a57600080fd5b6115626127b7565b506001600160a01b038416600090815260056020908152604080832086845282528083208151608081018352905463ffffffff808216808452600160201b83049091169483018590526001600160601b03600160401b83048116948401859052600160a01b909204909116606083018190529194936115e5939192909190612166565b905034816001600160601b031611156115fd57600080fd5b60408051600160e11b63214217070281523060048201526001600160a01b038681166024830152604482018890529151918816916342842e0e9160648082019260009290919082900301818387803b15801561165857600080fd5b505af115801561166c573d6000803e3d6000fd5b505050506001600160a01b0386166000818152600460209081526040808320898452825280832080546001600160a01b03191690559282526005815282822088835290529081208190556116bf82610fae565b90506001600160601b0381161561176b5760035460405160056001600160601b038481169190910416916001600160a01b03169082156108fc029083906000818181858888f1935050505015801561171b573d6000803e3d6000fd5b506002546040516001600160a01b0361010090920491909116906001600160601b03841683900380156108fc02916000818181858888f19350505050158015611768573d6000803e3d6000fd5b50505b60146001600160601b038316046001600160601b0316816001600160601b0316111561179357fe5b6040516001600160a01b038516906001600160601b038385031680156108fc02916000818181858888f193505050501580156117d3573d6000803e3d6000fd5b50816001600160601b031634111561181e5760405133906001600160601b038416340380156108fc02916000818181858888f1935050505015801561181c573d6000803e3d6000fd5b505b825160208085015160408087015160608089015183513381526001600160a01b038f81169782019790975263ffffffff9788168186015294871691850191909152429590951660808401526001600160601b0390811660a084015293841660c083015283861660e083015292841661010082015291518892828916928816917f68873a403491b56396aed3ca952515e210753f87516e920c650f89f6765adf64918190036101200190a450505050505050565b60046020908152600092835260408084209091529082529020546001600160a01b031681565b60008060008060008061190a8888611f0c565b611925575060009450849350839250829150819050806119e5565b61192d6127b7565b506001600160a01b03881660009081526005602090815260408083208a84528252918290208251608081018452905463ffffffff808216808452600160201b83049091169383018490526001600160601b03600160401b83048116958401869052600160a01b9092049091166060830181905290995091975091955093506119b8878742888861129b565b6001600160a01b03808b1660009081526004602090815260408083208d8452909152902054919450169150505b9295509295509295565b6119f96002612175565b611a0257600080fd5b601460ff84160460ff168460ff161115611a1b57600080fd5b611a2584846124ce565b6002805460ff191660ff92831617610100600160a81b0319166101006001600160a01b0386811682029290921792839055600380546001600160a01b0319168684161790819055604080518a8716815295891660208701529190930482168482015291166060830152517fd3839ff7b817a5302bae0a688a8452cf4ebf97c9d53fea7b3b687818822a0116916080908290030190a150505050565b6001600160a01b03808316600090815260046020908152604080832085845290915290205433911680611af257600080fd5b806001600160a01b0316826001600160a01b03161480611b175750611b176001612175565b611b2057600080fd5b60408051600160e01b6323b872dd0281523060048201526001600160a01b038381166024830152604482018690529151918616916323b872dd9160648082019260009290919082900301818387803b158015611b7b57600080fd5b505af1158015611b8f573d6000803e3d6000fd5b505050506001600160a01b038481166000818152600460209081526040808320888452825280832080546001600160a01b0319169055838352600582528083208884528252808320929092558151868516815290810192909252805186938516927fee1d6e1c75798c70e695026d2e14ff07b62007bd2de14e887159843e3467602292908290030190a350505050565b611c2c600160ff1b6111b8565b15611c3657600080fd5b611c43600160ff1b612175565b611c4c57600080fd5b611c5e611c5761252c565b838361257c565b5050565b60066020526000908152604090205460ff1681565b633b9aca0081565b611c5e828233611517565b611c95600082611c1f565b50565b60025460ff1681565b8151835114611caf57600080fd5b8051835114611cbd57600080fd5b60408051600280825260608083018452926020830190803883390190505090506000611ced33600160ff1b610e69565b15611d295733828280600101935060ff1681518110611d0857fe5b60200260200101906001600160a01b031690816001600160a01b0316815250505b60005b855181108015611d3f5750600260ff8316105b15611e44576000611d8d8a8a8a8a8681518110611d5857fe5b60200260200101518a8781518110611d6c57fe5b60200260200101518a8881518110611d8057fe5b6020026020010151612642565b9050611d9d81600160ff1b610e69565b611ded57611de88a8a8a8a8681518110611db357fe5b60200260200101518a8781518110611dc757fe5b60200260200101518a8881518110611ddb57fe5b6020026020010151612727565b611def565b805b9050611dff81600160ff1b610e69565b15611e3b5780848480600101955060ff1681518110611e1a57fe5b60200260200101906001600160a01b031690816001600160a01b0316815250505b50600101611d2c565b5060ff8116600214611e5557600080fd5b60015b8251811015611ec25760005b81811015611eb957838281518110611e7857fe5b60200260200101516001600160a01b0316848281518110611e9557fe5b60200260200101516001600160a01b03161415611eb157600080fd5b600101611e64565b50600101611e58565b506001600160a01b038816600090815260016020819052604090912080549091019055611ef082898961257c565b5050505050505050565b4283810161150e8787848488886113f2565b6001600160a01b039182166000908152600460209081526040808320938352929052205416151590565b611f406002612175565b611f4957600080fd5b60028054610100600160a81b0319166101006001600160a01b03858116919091029190911791829055600380546001600160a01b0319169184169190911790557fd3839ff7b817a5302bae0a688a8452cf4ebf97c9d53fea7b3b687818822a011690611fb79060ff166127a8565b600254611fc69060ff166127b1565b6002546003546040805160ff95861681529390941660208401526001600160a01b0361010090920482168385015216606082015290519081900360800190a15050565b6120136004612175565b61201c57600080fd5b6001600160a01b03821661202f57600080fd5b801561213b5760408051600160e01b6301ffc9a702808252600482015290516001600160a01b038416916301ffc9a7916024808301926020929190829003018186803b15801561207e57600080fd5b505afa158015612092573d6000803e3d6000fd5b505050506040513d60208110156120a857600080fd5b50516120b357600080fd5b60408051600160e01b6301ffc9a7028152600160e01b6380ac58cd02600482015290516001600160a01b038416916301ffc9a7916024808301926020929190829003018186803b15801561210657600080fd5b505afa15801561211a573d6000803e3d6000fd5b505050506040513d602081101561213057600080fd5b505161213b57600080fd5b6001600160a01b03919091166000908152600660205260409020805460ff1916911515919091179055565b6000610ede858542868661129b565b6000610e8f3383610e69565b9081161490565b61219260016111b8565b61219b57600080fd5b6001600160a01b03861660009081526006602052604090205460ff166121c057600080fd5b60008463ffffffff16116121d357600080fd5b8363ffffffff168363ffffffff16116121eb57600080fd5b428363ffffffff16116121fd57600080fd5b806001600160601b0316826001600160601b0316101561221c57600080fd5b816001600160601b031661222f83611020565b6001600160601b03161461224257600080fd5b806001600160601b031661225582611020565b6001600160601b03161461226857600080fd5b64e8d4a51000826001600160601b0316101561228357600080fd5b6001600160a01b038681166000908152600460209081526040808320898452909152902080546001600160a01b0319169189169190911790556122c46127b7565b506040805160808101825263ffffffff808716825285811660208084019182526001600160601b03808816858701908152878216606087019081526001600160a01b03808f166000908152600586528981208f8252909552978420875181549651935192518516600160a01b0292909416600160401b0273ffffffffffffffffffffffff000000000000000019938816600160201b0267ffffffff00000000199590981663ffffffff1990971696909617939093169590951716929092179094169190911790559061239886868686612166565b604080516001600160a01b038d811682528b8116602083015263ffffffff808b1683850152808a166060840152421660808301526001600160601b0380891660a084015280881660c0840152841660e083015291519293508992918c16917f995e44d6b89556d86505c5abeaafe40c776d3ffc087ada7a6f3d7192c954e544918190036101000190a350505050505050505050565b6000612438826127a8565b60ff161592915050565b60008061244e846127a8565b9050600061245b856127b1565b90508060ff168260ff161415612475578392505050610e8f565b8060ff168260ff161061248757600080fd5b836001600160f81b03168414156124b3578060ff168260ff168502816124a957fe5b0492505050610e8f565b8160ff168160ff1685816124c357fe5b040295945050505050565b600060048360ff161080156124e6575060408260ff16105b6124ef57600080fd5b60ff82166124fc57600080fd5b8160ff168360ff161061250e57600080fd5b5060ff9190911660061b1790565b6000198082188416189216171690565b60408051600180825281830190925260609182919060208083019080388339019050509050338160008151811061255f57fe5b6001600160a01b0390921660209283029190910190910152905090565b6001600160a01b0382166000908152602081905260409020546125a19084908361131b565b6001600160a01b0383166000818152602081905260408120929092558451909185916125c957fe5b60200260200101516001600160a01b03167f5a10526456f5116c0b7b80582c217d666243fd51b6a2d92c8011e601c2462e5f83600080876001600160a01b03166001600160a01b0316815260200190815260200160002054604051808381526020018281526020019250505060405180910390a3505050565b6000601b8460ff1610612655578361265a565b83601b015b93506001612669888888611083565b60405160200180807f19457468657265756d205369676e6564204d6573736167653a0a333200000000815250601c018281526020019150506040516020818303038152906040528051906020012085858560405160008152602001604052604051808581526020018460ff1660ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa158015612711573d6000803e3d6000fd5b5050604051601f19015198975050505050505050565b6000601b8460ff161061273a578361273f565b83601b015b9350600161274e888888611083565b85858560405160008152602001604052604051808581526020018460ff1660ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa158015612711573d6000803e3d6000fd5b60ff1660061c90565b603f1690565b6040805160808101825260008082526020820181905291810182905260608101919091529056fea165627a7a7230582062c0bad5276b2b900b0d037191867a08954c4f991639436a279dbef034f72dda0029